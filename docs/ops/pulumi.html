<!doctype html>
<html lang="en">
<head>
<title></title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Org-mode">

<link  href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
<style>
/* org mode styles on top of twbs */

html {
    position: relative;
    min-height: 100%;
}

body {
    font-size: 18px;
    margin-bottom: 105px;
}

footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 101px;
    background-color: #f5f5f5;
}

footer > div {
    padding: 10px;
}

footer p {
    margin: 0 0 5px;
    text-align: center;
    font-size: 16px;
}

#table-of-contents {
    margin-top: 20px;
    margin-bottom: 20px;
}

blockquote p {
    font-size: 18px;
}

pre {
    font-size: 16px;
}

.footpara {
    display: inline-block;
}

figcaption {
  font-size: 16px;
  color: #666;
  font-style: italic;
  padding-bottom: 15px;
}

/* from twbs docs */

.bs-docs-sidebar.affix {
    position: static;
}
@media (min-width: 768px) {
    .bs-docs-sidebar {
        padding-left: 20px;
    }
}

/* All levels of nav */
.bs-docs-sidebar .nav > li > a {
    display: block;
    padding: 4px 20px;
    font-size: 14px;
    font-weight: 500;
    color: #999;
}
.bs-docs-sidebar .nav > li > a:hover,
.bs-docs-sidebar .nav > li > a:focus {
    padding-left: 19px;
    color: #A1283B;
    text-decoration: none;
    background-color: transparent;
    border-left: 1px solid #A1283B;
}
.bs-docs-sidebar .nav > .active > a,
.bs-docs-sidebar .nav > .active:hover > a,
.bs-docs-sidebar .nav > .active:focus > a {
    padding-left: 18px;
    font-weight: bold;
    color: #A1283B;
    background-color: transparent;
    border-left: 2px solid #A1283B;
}

/* Nav: second level (shown on .active) */
.bs-docs-sidebar .nav .nav {
    display: none; /* Hide by default, but at >768px, show it */
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 30px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav > li > a:focus {
    padding-left: 29px;
}
.bs-docs-sidebar .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav > .active:focus > a {
    padding-left: 28px;
    font-weight: 500;
}

/* Nav: third level (shown on .active) */
.bs-docs-sidebar .nav .nav .nav {
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 40px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav .nav > li > a:focus {
    padding-left: 39px;
}
.bs-docs-sidebar .nav .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav .nav > .active:focus > a {
    padding-left: 38px;
    font-weight: 500;
}

/* Show and affix the side nav when space allows it */
@media (min-width: 992px) {
    .bs-docs-sidebar .nav > .active > ul {
        display: block;
    }
    /* Widen the fixed sidebar */
    .bs-docs-sidebar.affix,
    .bs-docs-sidebar.affix-bottom {
        width: 213px;
    }
    .bs-docs-sidebar.affix {
        position: fixed; /* Undo the static from mobile first approach */
        top: 20px;
    }
    .bs-docs-sidebar.affix-bottom {
        position: absolute; /* Undo the static from mobile first approach */
    }
    .bs-docs-sidebar.affix .bs-docs-sidenav,.bs-docs-sidebar.affix-bottom .bs-docs-sidenav {
        margin-top: 0;
        margin-bottom: 0
    }
}
@media (min-width: 1200px) {
    /* Widen the fixed sidebar again */
    .bs-docs-sidebar.affix-bottom,
    .bs-docs-sidebar.affix {
        width: 263px;
    }
}
</style>
<style>body { margin-bottom: 0px; }</style><script>
$(function() {
    'use strict';

    $('.bs-docs-sidebar li').first().addClass('active');

    $(document.body).scrollspy({target: '.bs-docs-sidebar'});

    $('.bs-docs-sidebar').affix();
});
</script>
</head>
<body>
<div id="content" class="container">
<div class="row"><div class="col-md-3 col-md-push-9"><nav id="table-of-contents">
<div id="text-table-of-contents" class="bs-docs-sidebar">
<ul class="nav">
<li><a href="#sec-"><code>ignoreChanges</code></a></li>
<li><a href="#sec-">adding secrets to config</a></li>
<li><a href="#sec-">OnCreateResource hooks</a>
<ul class="nav">
<li><a href="#sec-">1. Use dynamic providers/resources</a></li>
<li><a href="#sec-">2. Using CrossGuard</a></li>
</ul>
</li>
</ul>
</div>
</nav>
</div><div class="col-md-9 col-md-pull-3"><h1 class="title"></h1>
<div id="outline-container-sec-" class="outline-2">
<h2 id="sec-"><code>ignoreChanges</code></h2>
<div class="outline-text-2" id="text-">
<p>
This option specifies a list of properties which will be ignored when updating existing resources. Any properties specified in this list, that are also specified in the resource’s arguments, will only be used when creating the resource—and ignored entirely while updating it.<br >
</p>

<p>
For instance, in this example, the resource’s prop property will have its value of "new-value" set when initially creating resource, but from then on, any and all changes will be ignored: (from <a href="https://www.pulumi.com/docs/intro/concepts/programming-model/#ignorechanges">pulumi.com/docs</a>)<br >
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b58900;">res</span> = MyResource(<span style="color: #2aa198;">"res"</span>,
    prop=<span style="color: #2aa198;">"new-value"</span>,
    opts=ResourceOptions(ignore_changes=[<span style="color: #2aa198;">"prop"</span>]))
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-" class="outline-2">
<h2 id="sec-">adding secrets to config</h2>
<div class="outline-text-2" id="text-">
<pre class="example">
pulumi config set secrets:SSH_KEY --secret &lt; PATH_TO_KEY
</pre>
</div>
</div>


<div id="outline-container-sec-" class="outline-2">
<h2 id="sec-">OnCreateResource hooks</h2>
<div class="outline-text-2" id="text-">
<p>
There is no straightforward way to do this, but two options exist (<a href="https://pulumi-community.slack.com/archives/CDE799L1M/p1597668356273400">pulumi-community.slack.com</a>).<br >
</p>
</div>

<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">1. Use dynamic providers/resources</h3>
<div class="outline-text-3" id="text-">
<p>
This approach creates a new dynamic resources that depends on the resource that was created. It has its own <code>create()</code> implementation that<br >
serves as the hook.<br >
</p>

<p>
See <a href="https://www.pulumi.com/docs/intro/concepts/programming-model/#dynamicproviders">pulumi.com/docs</a> and an example implementation for AWS EC2 provisioners, <a href="https://github.com/pulumi/examples/blob/master/aws-py-ec2-provisioners/__main__.py">__main__.py</a> and <a href="https://github.com/pulumi/examples/blob/master/aws-py-ec2-provisioners/provisioners.py">provisioners.py</a> on GitHub.<br >
</p>

<p>
Example:<br >
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #859900;">from</span> typing <span style="color: #859900;">import</span> Optional, Any
<span style="color: #859900;">from</span> uuid <span style="color: #859900;">import</span> uuid4
<span style="color: #859900;">import</span> pulumi
<span style="color: #859900;">from</span> pulumi <span style="color: #859900;">import</span> dynamic
<span style="color: #859900;">class</span> <span style="color: #b58900;">OnCreateWarningProvider</span>(dynamic.ResourceProvider):
    <span style="color: #b58900;">warning_printed</span> = <span style="color: #6c71c4;">False</span>
    <span style="color: #859900;">def</span> <span style="color: #268bd2;">print_warning</span>(<span style="color: #859900;">self</span>, message):
        <span style="color: #859900;">if</span> <span style="color: #859900;">not</span> <span style="color: #859900;">self</span>.warning_printed:
            pulumi.warn(message)
            <span style="color: #b58900;">OnCreateWarningProvider.warning_printed</span> = <span style="color: #6c71c4;">True</span>
    <span style="color: #859900;">def</span> <span style="color: #268bd2;">create</span>(<span style="color: #859900;">self</span>, inputs: Any):
        <span style="color: #859900;">self</span>.print_warning(inputs[<span style="color: #2aa198;">'message'</span>])
        <span style="color: #859900;">return</span> dynamic.CreateResult(id_=uuid4().<span style="color: #6c71c4;">hex</span>, outs={})
<span style="color: #859900;">class</span> <span style="color: #b58900;">OnCreateWarning</span>(dynamic.Resource):
    <span style="color: #859900;">def</span> <span style="color: #268bd2;">__init__</span>(<span style="color: #859900;">self</span>, name: <span style="color: #6c71c4;">str</span>, message: <span style="color: #6c71c4;">str</span>, opts: Optional[pulumi.ResourceOptions] = <span style="color: #6c71c4;">None</span>):
        <span style="color: #6c71c4;">super</span>().__init__(
            OnCreateWarningProvider(),
            name,
            {<span style="color: #2aa198;">'message'</span>: message},
            opts=opts
        )
</pre>
</div>

<p>
which gets called by<br >
</p>

<div class="org-src-container">

<pre class="src src-python">messaging.OnCreateWarning(
    name=f<span style="color: #2aa198;">"on-create-warning-{resource_name}"</span>,
    message=<span style="color: #2aa198;">"Resource was created!"</span>,
    opts=pulumi.ResourceOptions(depends_on=[resource]),
)
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2. Using CrossGuard</h3>
<div class="outline-text-3" id="text-">
<p>
With a CrossGuard <code>ResourceValidationPolicy</code>, see for example  <a href="https://github.com/pulumi/templates-policy/blob/master/aws-python/__main__.py#L10-L15">github.com/pulumi</a>. Run Pulumi with<br >
</p>
<pre class="example">
pulumi up --policy-pack path-to-policy-code/
</pre>
</div>
</div>
</div>
</div></div></div>
</body>
</html>
